---
import { Image } from "astro:assets";
import type { SkillsTranslations } from "../i18n/translations";

import metasploitLogo from "../assets/tech/metasploit.png";
import nmapLogo from "../assets/tech/nmap.png";
import nessusLogo from "../assets/tech/nessus.png";
import openvasLogo from "../assets/tech/openvas.png";
import burpsuiteLogo from "../assets/tech/burpsuite.png";
import kalilinuxLogo from "../assets/tech/kali-linux.png";
import owaspLogo from "../assets/tech/owasp.png";

import adLogo from "../assets/tech/active-directory.png";
import fortinetLogo from "../assets/tech/fortinet.png";
import proxysquidLogo from "../assets/tech/squid.png";
import linuxLogo from "../assets/tech/linux.png";
import arubaLogo from "../assets/tech/aruba.png";

import wiresharkLogo from "../assets/tech/wireshark.png";
import autopsyLogo from "../assets/tech/autopsy.png";
import volatilityLogo from "../assets/tech/volatility.png";
import ftkimagerLogo from "../assets/tech/ftk_imager.png";
import magnetforensicsLogo from "../assets/tech/Magnet_Forensics.png";
import exiftoolLogo from "../assets/tech/exiftool.png";

import dockerLogo from "../assets/tech/docker.png";
import jenkinsLogo from "../assets/tech/jenkins.png";
import ansibleLogo from "../assets/tech/ansible.png";
import prometheusLogo from "../assets/tech/prometheus.png";
import grafanaLogo from "../assets/tech/grafana.png";
import kubernetesLogo from "../assets/tech/kubernetes.png";
import shellLogo from "../assets/tech/shell.png";
import pythonLogo from "../assets/tech/python.png";

import htmlLogo from "../assets/tech/html.png";
import cssLogo from "../assets/tech/css.png";
import javascriptLogo from "../assets/tech/javascript.png";
import astroLogo from "../assets/tech/astro.png";
import svelteLogo from "../assets/tech/svelte.png";

interface Props {
    t: SkillsTranslations;
}

const { t }: Props = Astro.props;

// Secciones técnicas: aquí sólo definimos la estructura y los logos.
// Los títulos y descripciones vienen del diccionario (t.sections), enlazados por "key".
const sections = [
    {
        key: "cyber",
        items: [
            { name: "Metasploit", logo: metasploitLogo },
            { name: "Nmap", logo: nmapLogo },
            { name: "Nessus", logo: nessusLogo },
            { name: "OpenVAS", logo: openvasLogo },
            { name: "Burp Suite", logo: burpsuiteLogo },
            { name: "OWASP Top 10", logo: owaspLogo },
        ],
    },
    {
        key: "systems",
        items: [
            { name: "Active Directory", logo: adLogo },
            { name: "Fortinet", logo: fortinetLogo },
            { name: "Proxy Squid", logo: proxysquidLogo },
            { name: "Linux", logo: linuxLogo },
            { name: "Aruba switches", logo: arubaLogo },
        ],
    },
    {
        key: "forensics",
        items: [
            { name: "Wireshark", logo: wiresharkLogo },
            { name: "Autopsy", logo: autopsyLogo },
            { name: "Volatility", logo: volatilityLogo },
            { name: "FTK Imager", logo: ftkimagerLogo },
            { name: "Magnet Forensics", logo: magnetforensicsLogo },
            { name: "Exiftool", logo: exiftoolLogo },
        ],
    },
    {
        key: "devops",
        items: [
            { name: "Docker", logo: dockerLogo },
            { name: "Jenkins", logo: jenkinsLogo },
            { name: "Ansible", logo: ansibleLogo },
            { name: "Prometheus", logo: prometheusLogo },
            { name: "Grafana", logo: grafanaLogo },
            { name: "Kubernetes", logo: kubernetesLogo },
            { name: "Bash / Shell", logo: shellLogo },
            { name: "Python", logo: pythonLogo },
        ],
    },
    {
        key: "web",
        items: [
            { name: "HTML", logo: htmlLogo },
            { name: "CSS", logo: cssLogo },
            { name: "JavaScript", logo: javascriptLogo },
            { name: "Astro", logo: astroLogo },
            { name: "Svelte", logo: svelteLogo },
        ],
    },
];

// Unimos secciones base + textos de traducción según la key
const sectionsWithText = sections.map((section) => {
    const text = t.sections.find((s) => s.key === section.key) ?? {
        title: "",
        description: "",
    };
    return {
        ...section,
        title: text.title,
        description: text.description,
    };
});
---

<section id="skills" class="scroll-mt-32">
    <header class="mb-10">
        <h2 class="flex items-center gap-3 text-3xl md:text-4xl font-semibold">
            <svg
                class="w-6 h-6 text-primary"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M5 9l14 0" />
                <path d="M5 15l14 0" />
                <path d="M11 4l-4 16" />
                <path d="M17 4l-4 16" />
            </svg>
            {t.title}
        </h2>
    </header>

    {/* BENTO GRID */}
    <div class="grid gap-6 lg:grid-cols-3">
        {sectionsWithText.map((section: any) => (
            <article class="rounded-3xl border border-bg-selection bg-bg-elevated/80 p-6 md:p-8 shadow-[0_24px_80px_rgba(0,0,0,0.55)]">
                <h3 class="text-lg md:text-xl font-semibold text-primary mb-1">
                    {section.title}
                </h3>
                <p class="text-sm text-text-muted mb-4">
                    {section.description}
                </p>

                <ul class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                    {section.items.map((item: any) => (
                        <li class="flex flex-col items-center gap-2">
                            <div class="flex h-20 w-20 items-center justify-center rounded-2xl border border-bg-selection bg-bg-dark/80 shadow-[0_14px_40px_rgba(0,0,0,0.45)]">
                                <Image src={item.logo} alt={item.name} class="h-12 w-12 object-contain" loading="lazy" />
                            </div>
                            <span class="text-xs text-text-muted text-center">
                                {item.name}
                            </span>
                        </li>
                    ))}
                </ul>
            </article>
        ))}
    </div>

    {/* SOFT SKILLS & LANGUAGES */}
    <div class="mt-10 grid gap-6 md:grid-cols-2">
        <article class="rounded-3xl border border-bg-selection bg-bg-elevated/80 p-6 md:p-7 shadow-[0_24px_80px_rgba(0,0,0,0.55)]">
            <h3 class="text-lg font-semibold text-primary mb-3">
                {t.softSkillsTitle}
            </h3>
            <ul class="space-y-1 text-sm text-text">
                {t.softSkills.map((text: string) => (
                    <li>
                        {text}
                    </li>
                ))}
            </ul>
        </article>

        <article class="rounded-3xl border border-bg-selection bg-bg-elevated/80 p-6 md:p-7 shadow-[0_24px_80px_rgba(0,0,0,0.55)]">
            <h3 class="text-lg font-semibold text-primary mb-3">
                {t.languagesTitle}
            </h3>
            <dl class="space-y-1 text-sm text-text">
                {t.languages.map((lang) => (
                    <div class="flex justify-between">
                        <dt>
                            {lang.name}
                        </dt>
                        <dd class="text-text-muted/80">
                            {lang.level}
                        </dd>
                    </div>
                ))}
            </dl>
        </article>
    </div>
</section>
